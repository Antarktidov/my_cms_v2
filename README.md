Простая учебная CMS, написаная на PHP, с расширениями и скинами.

CMS учебная, по этому здесь нет многих функиций, которые должны быть в настоящей CMS. Можно создать и читать блоги, а также комментировать их (если включено расширение comments). В CMS присутвует защита от SQL-инъекций, CSRF-аттак, а спецсимволы html экранируются при выводе.

# Установка
Склонируйте проект через git или скачайте папку с проектом и разархивируйте вручную.

```bash
git clone https://github.com/Antarktidov/my_cms_v2
```

Если вы хотите вносить вклад в оригинальный проект, или хотите, чтобы у вас на github была своя копия, форкните проект и склонируйте его из своего репозитория.

Для запуска вам понадобится PHP (у автора PHP 8.5), MySQL или MariaDB и веб-сервер Apache (автор использует готовую сборку — WAMP). Папка с проектом должна находится внутри соотсетсвующей папки вашего сервера (для XAMPP это htdocs, для WAMP —  www).

Перед установкой отредактируйте файл localSetting.php так, чтобы он содержал ваши настройки базы данных. Внутри базы данных запустите миграции (лежат в папке sql).

> [!CAUTION]
> Если ваш файл localSetting.php соддержит кофиденциальную информацию, он должен быть добавлен в .gitignore.

# Скины

CMS соддержит три скина: example, darky и other-side. Они лежат в папке skins. Чтобы изменить активный скин, измение переменную $my_cms_skin в localSetting.php. В примере ниже активный скин — "other-side".

```php
$my_cms_skin = "other-side";
```

## Создание собсвенного скина

Придумайте название собсенного скина и создайте папки с ним в папке skins. Структура вашей папки со скином должна вышлядеть так:
```bash
your-skin-name
│───css
|   └── skin.css
│───js
|   └── skin.js
└── skin.php
```

skin.css соддержит ваш css, а skin.js — js.

В файле skin.php находится, собсвенно, ваш скин. Структура файла должна быть такой:
```php
<?php
include __DIR__ . "/../../go_away.php";
my_cms_header();
?><!--Ваш html-код до контента-->
<?php my_cms_content(); ?>
<!--Ваш html-код после  контента-->
<?php my_cms_footer();
```

# Расширения

CMS соддержит два расширения: comments и blog_api. Comments — добавляет комментарии для блога, blog_api выводит информацию о блоге.

Список подключённых расширений хранится в переменной $my_cms_extensions. Примеры:

```php
$my_cms_extensions = ["comments", "blog_api"]; # подключены расширения comments и blog_api
$my_cms_extensions = []; # не подключены никакие расширения
```

## Разработка расширений

* Обычные расширения: смотри пример commnets в папке extensions.
* Api-расширения: смотри пример blog_api в папке extensions.

# URL для пользователя

```
<путь к CMS>/  — домашняя страница
<путь к CMS>/create_blog  — форма создания блога
<путь к CMS>/blog  — первые 3 блога
<путь к CMS>/blog/<url-название блога>  — конкретный блог
<путь к CMS>/api.php  — точка входа в api
<путь к CMS>/api.php?blog_id=<id блога> — api-информация о блоге (обеспечивается расширением blog_api).
```
